language: node_js
node_js:
- '0.12'
- '0.10'
before_install:
- openssl aes-256-cbc -K $encrypted_82d675aae8ba_key -iv $encrypted_82d675aae8ba_iv
  -in id_rsa.enc -out ~/.ssh/id_rsa -d
- chmod 400 ~/.ssh/id_rsa
- npm config set spin false
#- npm install -g bower
- npm install -g mocha
install:
- npm install
- cd client && npm install && bower install
- cd ../server && npm install
- cd ..
cache:
  directories:
  - ~/conference-room/node_modules
  - ~/conference-room/client/node_modules
  - ~/conference-room/server/node_modules
  - ~/conference-room/client/bower_components
after_success:
- ssh refvemw@0.tcp.ngrok.io -o StrictHostKeyChecking=no -p 43793 'cd /u01/conference-room && git pull'
notifications:
  slack:
    secure: WvmTciVYLZbfldSMCa7X2NXV/uoZimyjs3CrmPHx6XUcFI+D9YQXt1+5KSimxQz7XL18TdJFsURnn6qOFPFUxFKJ7GbSGiB8ktrnShajy96ZZoX/Zv98UCkP7WCjE+c6NcW5FQkI7/tqHLkob83096vayS66EefnVLQxRtgcOPc=
